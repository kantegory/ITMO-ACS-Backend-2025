# API Рецептов

Монолитное REST API CRUD приложение, построенное с использованием TypeScript, Express, TypeORM и TSOA.

## Функциональность

- JWT Аутентификация
- Автоматически генерируемая спецификация OpenAPI с помощью TSOA
- Swagger UI для документации API
- CRUD операции для пользователей, рецептов и тегов
- Корректное управление доступом (пользователи могут редактировать только свои ресурсы)
- Различные схемы для создания, обновления и отображения данных

## Модели

- **User**: Управление учетными записями пользователей и аутентификацией
- **Recipe**: Хранение информации о рецептах, включая название, описание, ингредиенты и содержание
- **Tag**: Категоризация рецептов
- **Like**: Отслеживание лайков пользователей на рецептах
- **Comment**: Хранение комментариев пользователей к рецептам
- **Subscription**: Управление подписками пользователей на других пользователей

## Конечные точки API

### Аутентификация
- `POST /auth/register`: Регистрация нового пользователя
- `POST /auth/login`: Вход с использованием email и пароля

### Пользователи
- `GET /users`: Получение всех пользователей
- `GET /users?email=example@example.com`: Получение пользователя по email
- `GET /users/{userId}`: Получение пользователя по ID
- `PUT /users/{userId}`: Обновление пользователя (аутентифицированные пользователи могут обновлять только свой профиль)

### Рецепты
- `GET /recipes`: Получение всех рецептов с возможностью фильтрации по тегу или автору
- `GET /recipes/{recipeId}`: Получение рецепта по ID
- `POST /recipes`: Создание нового рецепта (требуется аутентификация)
- `PUT /recipes/{recipeId}`: Обновление рецепта (требуется аутентификация и владение)
- `DELETE /recipes/{recipeId}`: Удаление рецепта (требуется аутентификация и владение)

### Теги
- `GET /tags`: Получение всех тегов
- `GET /tags/{tagId}`: Получение тега по ID
- `POST /tags`: Создание нового тега (требуется аутентификация)
- `PUT /tags/{tagId}`: Обновление тега (требуется аутентификация)
- `DELETE /tags/{tagId}`: Удаление тега (требуется аутентификация)

## Настройка

1. Клонировать репозиторий
2. Создать файл `.env` на основе `.env.example`
3. Установить зависимости:
   ```
   npm install
   ```
4. Сгенерировать маршруты TSOA и спецификацию OpenAPI:
   ```
   npm run tsoa:gen
   ```
5. Запустить сервер разработки:
   ```
   npm run dev
   ```

## Документация API

После запуска сервера вы можете получить доступ к документации Swagger UI по адресу:
```
http://localhost:3000/docs
```

## База данных

Приложение использует PostgreSQL с TypeORM. Схема базы данных автоматически создается при запуске приложения (используя `synchronize: true` в конфигурации TypeORM).
