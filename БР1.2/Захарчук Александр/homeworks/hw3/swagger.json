{"openapi":"3.0.0","info":{"title":"Recipe API","version":"1.0.0","description":"API для управления рецептами"},"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}},"schemas":{"User":{"type":"object","properties":{"username":{"type":"string"},"email":{"type":"string"},"profile_picture":{"type":"string"},"bio":{"type":"string"},"created_at":{"type":"string","format":"date-time"},"updated_at":{"type":"string","format":"date-time"}},"required":["username","email"]},"Recipe":{"type":"object","properties":{"recipe_id":{"type":"integer"},"title":{"type":"string"},"description":{"type":"string"},"dish_type":{"type":"string","enum":["appetizer","main_course","dessert","salad","soup","side_dish","breakfast","snack","beverage"]},"difficulty_level":{"type":"string","enum":["beginner","easy","medium","hard","expert"]},"preparation_time_minutes":{"type":"integer"},"cooking_time_minutes":{"type":"integer"},"user":{"$ref":"#/components/schemas/User"},"ingredients":{"type":"array","items":{"$ref":"#/components/schemas/Ingredient"}},"steps":{"type":"array","items":{"type":"object","properties":{"recipe_step_id":{"type":"integer"},"step_number":{"type":"integer"},"instruction":{"type":"string"},"image":{"type":"string"},"video":{"type":"string"}}}},"created_at":{"type":"string","format":"date-time"},"updated_at":{"type":"string","format":"date-time"}},"required":["recipe_id","title","description","dish_type","difficulty_level","preparation_time_minutes","cooking_time_minutes","user","ingredients","steps","created_at","updated_at"]},"Comment":{"type":"object","properties":{"comment_id":{"type":"integer"},"text":{"type":"string"},"user":{"$ref":"#/components/schemas/User"},"recipe":{"$ref":"#/components/schemas/Recipe"}}},"Ingredient":{"type":"object","properties":{"ingredient_id":{"type":"integer"},"name":{"type":"string"},"description":{"type":"string"},"created_at":{"type":"string","format":"date-time"},"updated_at":{"type":"string","format":"date-time"}},"required":["ingredient_id","name","description","created_at","updated_at"]},"Like":{"type":"object","properties":{"like_id":{"type":"integer"},"user":{"type":"object","properties":{"username":{"type":"string"}}},"recipe":{"type":"object","properties":{"recipe_id":{"type":"integer"},"title":{"type":"string"}}}}},"RecipeIngredient":{"type":"object","properties":{"id":{"type":"integer"},"recipe":{"type":"object","properties":{"recipe_id":{"type":"integer"},"title":{"type":"string"}}},"ingredient":{"type":"object","properties":{"ingredient_id":{"type":"integer"},"name":{"type":"string"}}},"quantity":{"type":"integer"},"unit":{"type":"string","enum":["g","kg","ml","l","tsp","tbsp","cup","piece","slice","pinch","dash","drop","bunch","leaf","clove","can","bottle","package"]}}},"RecipeStep":{"type":"object","properties":{"recipe_step_id":{"type":"integer"},"step_number":{"type":"integer"},"instruction":{"type":"string"},"recipe":{"type":"object","properties":{"recipe_id":{"type":"integer"},"title":{"type":"string"},"description":{"type":"string"}}},"image":{"type":"string"},"video":{"type":"string"}},"required":["step_number","description","recipe"]},"SavedRecipe":{"type":"object","properties":{"saved_recipe_id":{"type":"integer"},"recipe":{"type":"object","properties":{"recipe_id":{"type":"integer"},"title":{"type":"string"},"description":{"type":"string"}}},"user":{"type":"object","properties":{"username":{"type":"string"}}}},"required":["recipe","user"]},"Subscription":{"type":"object","properties":{"subscription_id":{"type":"integer"},"follower":{"$ref":"#/components/schemas/User"},"followed":{"$ref":"#/components/schemas/User"}},"required":["follower","followed"]}}},"security":[{"bearerAuth":[]}],"paths":{"/comments":{"post":{"summary":"Создать комментарий","tags":["Comments"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["recipeId","text"],"properties":{"recipeId":{"type":"integer"},"text":{"type":"string"}}}}}},"responses":{"200":{"description":"Комментарий успешно создан","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Comment"}}}},"401":{"description":"Неавторизован"},"404":{"description":"Пользователь или рецепт не найден"}}},"get":{"summary":"Получить все комментарии","tags":["Comments"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Список комментариев","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Comment"}}}}}}}},"/comments/{id}":{"get":{"summary":"Получить комментарий по ID","tags":["Comments"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Найденный комментарий","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Comment"}}}},"404":{"description":"Комментарий не найден"}}},"put":{"summary":"Обновить комментарий","tags":["Comments"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"text":{"type":"string"}}}}}},"responses":{"200":{"description":"Комментарий обновлён","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Comment"}}}},"403":{"description":"Нет прав"},"404":{"description":"Комментарий не найден"}}},"delete":{"summary":"Удалить комментарий","tags":["Comments"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Комментарий удалён"},"403":{"description":"Нет прав"},"404":{"description":"Комментарий не найден"}}}},"/ingredients":{"post":{"summary":"Создать ингредиент","tags":["Ingredients"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","description"],"properties":{"name":{"type":"string"},"description":{"type":"string"}}}}}},"responses":{"200":{"description":"Ингредиент успешно создан","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Ingredient"}}}},"401":{"description":"Неавторизован"}}},"get":{"summary":"Получить список всех ингредиентов","tags":["Ingredients"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Список ингредиентов","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Ingredient"}}}}}}}},"/ingredients/{id}":{"get":{"summary":"Получить ингредиент по ID","tags":["Ingredients"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Найденный ингредиент","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Ingredient"}}}},"404":{"description":"Ингредиент не найден"}}},"put":{"summary":"Обновить ингредиент","tags":["Ingredients"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"}}}}}},"responses":{"200":{"description":"Ингредиент обновлён","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Ingredient"}}}},"404":{"description":"Ингредиент не найден"}}},"delete":{"summary":"Удалить ингредиент","tags":["Ingredients"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Ингредиент удалён"},"404":{"description":"Ингредиент не найден"}}}},"/likes":{"post":{"summary":"Поставить лайк рецепту","tags":["Likes"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["recipeId"],"properties":{"recipeId":{"type":"integer"}}}}}},"responses":{"200":{"description":"Лайк успешно добавлен","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Like"}}}},"401":{"description":"Неавторизован"},"404":{"description":"Пользователь или рецепт не найден"}}},"get":{"summary":"Получить лайки текущего пользователя","tags":["Likes"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Список лайков","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Like"}}}}},"401":{"description":"Неавторизован"}}}},"/likes/{id}":{"delete":{"summary":"Удалить лайк по ID","tags":["Likes"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Лайк удалён"},"401":{"description":"Неавторизован"},"403":{"description":"Нет прав на удаление лайка"},"404":{"description":"Лайк не найден"}}}},"/recipes-ingredients":{"post":{"summary":"Добавить ингредиент в рецепт","tags":["RecipeIngredients"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["recipeId","ingredientId","quantity","unit"],"properties":{"recipeId":{"type":"integer"},"ingredientId":{"type":"integer"},"quantity":{"type":"integer"},"unit":{"type":"string","enum":["g","kg","ml","l","tsp","tbsp","cup","piece","slice","pinch","dash","drop","bunch","leaf","clove","can","bottle","package"]}}}}}},"responses":{"200":{"description":"Ингредиент успешно добавлен","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecipeIngredient"}}}},"401":{"description":"Неавторизован"},"404":{"description":"Рецепт или ингредиент не найден"}}},"get":{"summary":"Получить все ингредиенты рецептов","tags":["RecipeIngredients"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Список ингредиентов рецептов","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RecipeIngredient"}}}}},"401":{"description":"Неавторизован"}}}},"/recipes-ingredients/{id}":{"get":{"summary":"Получить ингредиент рецепта по ID","tags":["RecipeIngredients"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Ингредиент найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecipeIngredient"}}}},"404":{"description":"Ингредиент не найден"}}},"put":{"summary":"Обновить ингредиент рецепта по ID","tags":["RecipeIngredients"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"recipeId":{"type":"integer"},"ingredientId":{"type":"integer"},"quantity":{"type":"integer"},"unit":{"type":"string","enum":["g","kg","ml","l","tsp","tbsp","cup","piece","slice","pinch","dash","drop","bunch","leaf","clove","can","bottle","package"]}}}}}},"responses":{"200":{"description":"Ингредиент успешно обновлён"},"403":{"description":"Нет прав на редактирование"},"404":{"description":"Ингредиент не найден"}}},"delete":{"summary":"Удалить ингредиент из рецепта по ID","tags":["RecipeIngredients"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Ингредиент успешно удалён"},"403":{"description":"Нет прав на удаление"},"404":{"description":"Ингредиент не найден"}}}},"/recipes":{"post":{"summary":"Создать новый рецепт","tags":["Recipes"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["title","description","dish_type","difficulty_level","preparation_time_minutes","cooking_time_minutes"],"properties":{"title":{"type":"string"},"description":{"type":"string"},"dish_type":{"type":"string","enum":["appetizer","main_course","dessert","salad","soup","side_dish","breakfast","snack","beverage"]},"difficulty_level":{"type":"string","enum":["beginner","easy","medium","hard","expert"]},"preparation_time_minutes":{"type":"integer"},"cooking_time_minutes":{"type":"integer"}}}}}},"responses":{"200":{"description":"Рецепт успешно создан","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Recipe"}}}},"401":{"description":"Неавторизован"},"404":{"description":"Пользователь не найден"}}},"get":{"summary":"Получить все рецепты","tags":["Recipes"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Список рецептов","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Recipe"}}}}},"401":{"description":"Неавторизован"}}}},"/recipes/{id}":{"get":{"summary":"Получить рецепт по ID","tags":["Recipes"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Рецепт найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Recipe"}}}},"401":{"description":"Неавторизован"},"404":{"description":"Рецепт не найден"}}},"put":{"summary":"Обновить рецепт по ID","tags":["Recipes"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["title","description","dish_type","difficulty_level","preparation_time_minutes","cooking_time_minutes"],"properties":{"title":{"type":"string"},"description":{"type":"string"},"dish_type":{"type":"string","enum":["appetizer","main_course","dessert","salad","soup","side_dish","breakfast","snack","beverage"]},"difficulty_level":{"type":"string","enum":["beginner","easy","medium","hard","expert"]},"preparation_time_minutes":{"type":"integer"},"cooking_time_minutes":{"type":"integer"}}}}}},"responses":{"200":{"description":"Рецепт успешно обновлен","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Recipe"}}}},"403":{"description":"Нет прав для редактирования рецепта"},"404":{"description":"Рецепт не найден"}}},"delete":{"summary":"Удалить рецепт по ID","tags":["Recipes"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Рецепт успешно удален"},"403":{"description":"Нет прав для удаления рецепта"},"404":{"description":"Рецепт не найден"}}}},"/recipe-steps":{"post":{"summary":"Создать новый шаг для рецепта","tags":["RecipeSteps"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["recipeId","step_number","instruction"],"properties":{"recipeId":{"type":"integer"},"step_number":{"type":"integer"},"instruction":{"type":"string"}}}}}},"responses":{"200":{"description":"Шаг рецепта успешно создан","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecipeStep"}}}},"401":{"description":"Неавторизован"},"404":{"description":"Рецепт не найден"}}}},"/recipe-steps/{id}":{"get":{"summary":"Получить шаг рецепта по ID","tags":["RecipeSteps"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Шаг рецепта найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecipeStep"}}}},"401":{"description":"Неавторизован"},"404":{"description":"Шаг рецепта не найден"}}},"put":{"summary":"Обновить шаг рецепта по ID","tags":["RecipeSteps"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"recipeId":{"type":"integer"},"step_number":{"type":"integer"},"description":{"type":"string"}}}}}},"responses":{"200":{"description":"Шаг рецепта успешно обновлен"},"403":{"description":"Нет прав для редактирования шага рецепта"},"404":{"description":"Шаг рецепта не найден"}}},"delete":{"summary":"Удалить шаг рецепта по ID","tags":["RecipeSteps"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Шаг рецепта успешно удален"},"403":{"description":"Нет прав для удаления шага рецепта"},"404":{"description":"Шаг рецепта не найден"}}}},"/saved-recipes":{"post":{"summary":"Сохранить рецепт","tags":["SavedRecipes"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["recipeId"],"properties":{"recipeId":{"type":"integer"}}}}}},"responses":{"200":{"description":"Рецепт успешно сохранен","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SavedRecipe"}}}},"401":{"description":"Неавторизован"},"404":{"description":"Рецепт или пользователь не найден"}}},"get":{"summary":"Получить список сохраненных рецептов","tags":["SavedRecipes"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Список сохраненных рецептов","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SavedRecipe"}}}}},"401":{"description":"Неавторизован"},"404":{"description":"Пользователь не найден"}}}},"/saved-recipes/{id}":{"delete":{"summary":"Удалить сохраненный рецепт по ID","tags":["SavedRecipes"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Сохраненный рецепт успешно удален"},"401":{"description":"Неавторизован"},"403":{"description":"Нет прав для удаления сохраненного рецепта"},"404":{"description":"Сохраненный рецепт не найден"}}}},"/subscriptions":{"post":{"summary":"Подписка на другого пользователя","tags":["Subscriptions"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["targetUsername"],"properties":{"targetUsername":{"type":"string"}}}}}},"responses":{"200":{"description":"Подписка успешно создана","content":{"application/json":{"schema":{"type":"object","properties":{"subscription_id":{"type":"integer"},"followed":{"$ref":"#/components/schemas/User"}},"required":["followed"]}}}},"401":{"description":"Неавторизован"},"404":{"description":"Пользователь не найден"}}},"get":{"summary":"Получить список подписок пользователя","tags":["Subscriptions"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Список подписок пользователя","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"subscription_id":{"type":"integer"},"followed":{"$ref":"#/components/schemas/User"}}}}}}},"401":{"description":"Неавторизован"},"404":{"description":"Пользователь не найден"}}}},"/subscriptions/{id}":{"delete":{"summary":"Отписаться от пользователя по ID","tags":["Subscriptions"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Подписка успешно удалена"},"401":{"description":"Неавторизован"},"403":{"description":"Нет прав для удаления подписки"},"404":{"description":"Подписка не найдена"}}}},"/users":{"post":{"summary":"Создание нового пользователя","tags":["Users"],"security":[[]],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["username","email","password"],"properties":{"username":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"},"profile_picture":{"type":"string"},"bio":{"type":"string"}}}}}},"responses":{"200":{"description":"Пользователь успешно создан","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"description":"Ошибка валидации"}}},"get":{"summary":"Получить список всех пользователей","tags":["Users"],"responses":{"200":{"description":"Список пользователей","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}},"401":{"description":"Неавторизован"}}}},"/users/login":{"post":{"summary":"Логин пользователя","tags":["Users"],"security":[[]],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["username","password"],"properties":{"username":{"type":"string"},"password":{"type":"string"}}}}}},"responses":{"200":{"description":"Успешный вход и получение токена","content":{"application/json":{"schema":{"type":"object","properties":{"token":{"type":"string"}}}}}},"401":{"description":"Неверные учетные данные"},"404":{"description":"Пользователь не найден"}}}},"/users/{username}":{"get":{"summary":"Получить пользователя по имени","tags":["Users"],"parameters":[{"in":"path","name":"username","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Данные пользователя","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"401":{"description":"Неавторизован"},"404":{"description":"Пользователь не найден"}}},"put":{"summary":"Обновить данные пользователя","tags":["Users"],"parameters":[{"in":"path","name":"username","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"},"profile_picture":{"type":"string"},"bio":{"type":"string"}}}}}},"responses":{"200":{"description":"Данные пользователя обновлены","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"401":{"description":"Неавторизован"},"404":{"description":"Пользователь не найден"}}},"delete":{"summary":"Удалить пользователя","tags":["Users"],"parameters":[{"in":"path","name":"username","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Пользователь успешно удален"},"401":{"description":"Неавторизован"},"404":{"description":"Пользователь не найден"}}}}},"tags":[{"name":"Comments","description":"API для управления комментариями"},{"name":"Ingredients","description":"API для управления ингредиентами"},{"name":"Likes","description":"API для управления лайками рецептов"},{"name":"RecipeIngredients","description":"API для управления ингредиентами рецептов"}]}
